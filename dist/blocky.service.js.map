{"version":3,"file":"blocky.service.js","sourceRoot":"","sources":["../src/blocky.service.ts"],"names":[],"mappings":"AAGA,MAAM,OAAO,aAAa;IACxB,YACS,YAA0B,EAC1B,MAAc,EACd,WAAmB,QAAQ;QAF3B,iBAAY,GAAZ,YAAY,CAAc;QAC1B,WAAM,GAAN,MAAM,CAAQ;QACd,aAAQ,GAAR,QAAQ,CAAmB;IACjC,CAAC;IAEJ,eAAe,CAAC,MAAiB;QAC/B,OAAO,IAAI,CAAC,QAAQ,CAAC,qBAAqB,EAAE,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC,CAAC;IACtE,CAAC;IAED,KAAK,CAAC,kBAAkB;QACtB,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,QAAQ,CAAC,uBAAuB,EAAE,IAAI,CAAC,CAAC;QAEnE,OAAO,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAmB,EAAE,EAAE,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC;IAClE,CAAC;IAEO,QAAQ,CAAC,MAAc,EAAE,OAAY;QAC3C,OAAO,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC;YAChC,GAAG,EAAE,IAAI;YACT,OAAO,EAAE,IAAI,CAAC,MAAM;YACpB,OAAO,EAAE,MAAM;YACf,OAAO,EAAE,OAAO;YAChB,UAAU,EAAE,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC;YAC1B,SAAS,EAAE,IAAI,CAAC,QAAQ;SACzB,CAAC,CAAC;IACL,CAAC;CACF","sourcesContent":["import { AppWebsocket, CellId } from '@holochain/conductor-api';\nimport { BlockNode } from 'block-board';\n\nexport class BlockyService {\n  constructor(\n    public appWebsocket: AppWebsocket,\n    public cellId: CellId,\n    public zomeName: string = 'blocky'\n  ) {}\n\n  createBoardNode(layout: BlockNode): Promise<string> {\n    return this.callZome('create_block_layout', JSON.stringify(layout));\n  }\n\n  async getAllBoardLayouts(): Promise<Array<BlockNode>> {\n    const layouts = await this.callZome('get_all_block_layouts', null);\n\n    return layouts.map(([_, l]: [string, string]) => JSON.parse(l));\n  }\n\n  private callZome(fnName: string, payload: any) {\n    return this.appWebsocket.callZome({\n      cap: null,\n      cell_id: this.cellId,\n      fn_name: fnName,\n      payload: payload,\n      provenance: this.cellId[1],\n      zome_name: this.zomeName,\n    });\n  }\n}\n"]}